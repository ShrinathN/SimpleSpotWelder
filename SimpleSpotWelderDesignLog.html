<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">ul.lst-kix_xvdzy6tu78xp-2{list-style-type:none}ul.lst-kix_xvdzy6tu78xp-3{list-style-type:none}.lst-kix_xvdzy6tu78xp-8>li:before{content:"\0025a0   "}ul.lst-kix_xvdzy6tu78xp-4{list-style-type:none}ul.lst-kix_xvdzy6tu78xp-5{list-style-type:none}ul.lst-kix_xvdzy6tu78xp-0{list-style-type:none}ul.lst-kix_xvdzy6tu78xp-1{list-style-type:none}.lst-kix_xvdzy6tu78xp-4>li:before{content:"\0025cb   "}.lst-kix_xvdzy6tu78xp-2>li:before{content:"\0025a0   "}.lst-kix_xvdzy6tu78xp-3>li:before{content:"\0025cf   "}li.li-bullet-0:before{margin-left:-18pt;white-space:nowrap;display:inline-block;min-width:18pt}.lst-kix_xvdzy6tu78xp-0>li:before{content:"\0025cf   "}.lst-kix_xvdzy6tu78xp-1>li:before{content:"\0025cb   "}.lst-kix_xvdzy6tu78xp-5>li:before{content:"\0025a0   "}ul.lst-kix_xvdzy6tu78xp-6{list-style-type:none}.lst-kix_xvdzy6tu78xp-6>li:before{content:"\0025cf   "}.lst-kix_xvdzy6tu78xp-7>li:before{content:"\0025cb   "}ul.lst-kix_xvdzy6tu78xp-7{list-style-type:none}ul.lst-kix_xvdzy6tu78xp-8{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c15{padding-top:0pt;padding-bottom:3pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:center}.c1{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c11{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c2{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c16{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:26pt;font-family:"Arial";font-style:normal}.c18{color:#ff0000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c10{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c4{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c8{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c6{padding-top:3pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c13{background-color:#ffffff;max-width:468pt;padding:72pt 72pt 72pt 72pt}.c0{padding:0;margin:0}.c14{margin-left:36pt;padding-left:0pt}.c7{color:inherit;text-decoration:inherit}.c12{margin-left:18pt}.c5{height:11pt}.c17{font-weight:700}.c9{height:20pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c13 doc-content"><p class="c15 title" id="h.ilwk7quxuvie"><span class="c16">Simple Spot Welder Design Log</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c6"><span class="c2"><a class="c7" href="#h.9gx7ce4bmbrt">15 April 2025 - 1735 hours&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2</a></span></p><p class="c6 c12"><span class="c1"><a class="c7" href="#h.lrk4g9ntqwzr">FET Choice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2</a></span></p><p class="c6"><span class="c2"><a class="c7" href="#h.f8906qysn65h">17 April 2025 - 0000 hours&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7</a></span></p><p class="c6"><span class="c2"><a class="c7" href="#h.guqwb0oxr0kr">17 April 2025 - 2215 hours&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7</a></span></p><p class="c6"><span class="c2"><a class="c7" href="#h.4q2t9xgy1xjt">18 April 2025 - 0152 hours&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7</a></span></p><p class="c6"><span class="c2"><a class="c7" href="#h.c5dx2imqf0u">18 April 2025 - 1423 hours&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8</a></span></p><p class="c6"><span class="c2"><a class="c7" href="#h.tbtgzjhd78cu">19 April 2025 - 0413 hours&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;9</a></span></p><p class="c6"><span class="c2"><a class="c7" href="#h.mu20pmepa530">21 April 2025 - 1532 hours&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</a></span></p><p class="c6"><span class="c2"><a class="c7" href="#h.2oiecirwf6yw">3 May 2025 - 1550 hours&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</a></span></p><p class="c6"><span class="c2"><a class="c7" href="#h.uapb26480x14">4 May 2025 - 0356 hours&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10</a></span></p><p class="c3 c5"><span class="c1"></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span class="c1"></span></p><h1 class="c4" id="h.9gx7ce4bmbrt"><span class="c8">15 April 2025 - 1735 hours</span></h1><h2 class="c10" id="h.lrk4g9ntqwzr"><span class="c11">FET Choice</span></h2><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">Now is a good time to start the log. Not only to keep me focused but also so that I can itch my writing urge. Well let&#39;s get to into the meat then</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">I am debating if I should use IRF3205 (110A 50V 8m&#8486; NFETs) versus generic 50N03 (30A 50V 6.5m&#8486; FETs)</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 205.33px;"><img alt="" src="images/image10.png" style="width: 624.00px; height: 205.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 210.67px;"><img alt="" src="images/image4.png" style="width: 624.00px; height: 210.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c5"><span class="c1"></span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">Ah the package of IRF3205 is TO-263 versus TO-252 for 50N03. Even though the price is more than double as much, IRF3205 seems like the better option because of the much larger footprint.</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 383.88px; height: 462.25px;"><img alt="" src="images/image6.png" style="width: 383.88px; height: 462.25px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span>I choose </span><span class="c17">IRF3205</span><span class="c1">.</span></p><p class="c3"><span class="c1">Tangent, writing this log has revealed to me that I may have been turning into an NPC, unable to focus on stuff and without an inner voice. I blame social media and distractions. Back to topic at hand.</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span>So this is how the schematics look right now.</span><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 329.33px;"><img alt="" src="images/image2.png" style="width: 624.00px; height: 329.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">For making a decent spot welder, I need to have a decent pulse control. This means I should be able to turn on and off the MOSFETs very quickly, so that the linear region is as short as possible. This will also protect the MOSFETs.</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">The FETs have an Rds of 8m&#8486;, which 10 in parallel would mean 800u&#8486;.</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">At the normal 12V of the battery, it would equal to about 15000A of current. (V=IR)</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">Talking in charge, a 20x 2200uF capacitor bank, charged to 12V would have a total charge of 528mC (Q=CV). </span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">Now if we take the charge, and the current, we get a discharge time of 35.2us (I=Q/t).</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">This means the entire capacitor bank would discharge in 35us if given a resistance of 800u&#8486;. Although this is just the theoretical max current, since the lead+trace+capacitor bank ESR resistance would dominate the calculation. I think I will have to assume a number for all of them because I cannot just assume it all to be 0.</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">The capacitor bank is 20x 2200uF 63V. So the total energy in the bank would be 55J, if charged to 50V. Since our FETs are 55V, it&#39;s better to limit charging to 45V, which would give us 44.45J. Now le </span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span>I am worried if the FETs will be able to tolerate the current peak.</span><hr style="page-break-before:always;display:none;"></p><p class="c3"><span class="c1">I just found slightly better MOSFETs for the same price, but a lower voltage rating</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 216.00px;"><img alt="" src="images/image5.png" style="width: 624.00px; height: 216.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 199.75px; height: 169.02px;"><img alt="" src="images/image11.png" style="width: 199.75px; height: 169.02px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c1">Rds is lower by 2m&#8486;. Not a large difference, but it will add up for sure.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 129.33px;"><img alt="" src="images/image8.png" style="width: 624.00px; height: 129.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c1">Pulse current is absolutely insane. 470A!!! Need to study datasheet more though</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 425.48px; height: 422.75px;"><img alt="" src="images/image13.png" style="width: 425.48px; height: 422.75px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c1">This image is awesome. I can do 100A @ 10V for 100us. Insane. But at 12V, not even 10ms at a lot lower current. Anyway, this means I can do 400A at 11V or 12V as long as the pulse is incredibly short at 10us. It is a good thing I am planning on having even shorter pulses at 1us.</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">So next step, checking if that kind of pulse timing is actually possible.</span></p><hr style="page-break-before:always;display:none;"><p class="c3 c5"><span class="c1"></span></p><h1 class="c4" id="h.f8906qysn65h"><span class="c8">17 April 2025 - 0000 hours</span></h1><p class="c3"><span class="c1">So continuing from where I left. I was studying the new MOSFET datasheet. During the day I read a few things and talked to ChatGPT and I saw an interesting field.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 54.67px;"><img alt="" src="images/image3.png" style="width: 624.00px; height: 54.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c1">The avalanche energy is the interesting bit. This means I can actually turn the instantaneous power dissipation (i.e. in watts) into joules (by multiplying with the time) and compare it directly with the above number, since my application is a pulse of energy, not repetitive pulses.</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">So now I will have to calculate how fast I can actually turn on the MOSFETs.</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 126.67px;"><img alt="" src="images/image7.png" style="width: 624.00px; height: 126.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c1">The above image gives us everything we need.</span></p><p class="c3 c5"><span class="c1"></span></p><h1 class="c4" id="h.guqwb0oxr0kr"><span class="c8">17 April 2025 - 2215 hours</span></h1><p class="c3"><span class="c1">New idea, lets use small SOT-23 FETs to do the actual gate driving for the MOSFET array.</span></p><h1 class="c4" id="h.4q2t9xgy1xjt"><span class="c8">18 April 2025 - 0152 hours</span></h1><p class="c3"><span class="c1">I will use the cheap CJ3400 and CJ3401 FETs that I have.</span></p><hr style="page-break-before:always;display:none;"><h1 class="c4 c9" id="h.gvlvbf90f02t"><span class="c8"></span></h1><h1 class="c4" id="h.c5dx2imqf0u"><span class="c8">18 April 2025 - 1423 hours</span></h1><p class="c3"><span class="c1">This is a log of events last night.</span></p><p class="c3"><span class="c1">I created the input stage of the circuit. It can accept a voltage of up to 30V (although 12V is what its nominally made for)</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 384.00px;"><img alt="" src="images/image9.png" style="width: 624.00px; height: 384.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c1">I added an LM7805 to step down 12V to 30V to 5V which is stepped down to 3.3V for the MCU by AMS1117-3.3. On the bottom power path we have the STD10PF06 PMOS to switch power on and off to the capacitor bank, with a 1R inrush limiting resistor. This part is going to be pulsed anyway, to ensure inrush current isn&rsquo;t a problem. I could also include a dedicated precharge path. I&rsquo;ll add that.</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">Then we have the boost stage which can optionally boost the input voltage as high as required. Up to 25V (for now, this is limited by the capacitor bank voltage and the main switching FETs Vgs max voltage). I am trying to decide on a decent FET for the boost stage as well which can handle a high voltage (50V+).</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c1">FINALLY!!! After a lot of distraction I finally decided on the generic 50N03 NFETs. 50V, 30A, pretty good I would say, in a TO-252 package.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 335.58px; height: 112.53px;"><img alt="" src="images/image12.png" style="width: 335.58px; height: 112.53px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span class="c1">Also I think it would be a good idea to make voltage and current ratings visible in schematics, at least for the power electronics part of the circuit. I should make this a standard part of the design process from now on.</span></p><p class="c3 c5"><span class="c1"></span></p><p class="c3"><span class="c18">I got the voltage wrong. The FET is 30V and 50A, not the other way around. The search continues&hellip;</span></p><h1 class="c4" id="h.tbtgzjhd78cu"><span class="c8">19 April 2025 - 0413 hours</span></h1><p class="c3"><span class="c1">Well that&rsquo;s not really a problem either way, 30V FETs will do just fine!</span></p><p class="c3"><span class="c1">Also I figured out how to drive the FETs, with smaller FETs which will be driven like this.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 624.00px; height: 390.67px;"><img alt="" src="images/image1.png" style="width: 624.00px; height: 390.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span>TODO: should probably search if motor drivers or anything like that can work here. Buffers?</span><hr style="page-break-before:always;display:none;"></p><h1 class="c4" id="h.mu20pmepa530"><span class="c8">21 April 2025 - 1532 hours</span></h1><p class="c3"><span class="c1">I have updated the schematics. Everything is mostly done, schematics wise. Just need to do some math to figure out if I&rsquo;ll blow this up as soon as I turn it on or what</span></p><p class="c3 c5"><span class="c1"></span></p><h1 class="c4" id="h.2oiecirwf6yw"><span class="c8">3 May 2025 - 1550 hours</span></h1><p class="c3"><span class="c1">Hello. I still have been working on this but didn&rsquo;t bother to update the document. Not too many changes though.</span></p><p class="c3"><span class="c1">Alright, now let&#39;s try to calculate the temperature rise properly.</span></p><h1 class="c4" id="h.uapb26480x14"><span class="c8">4 May 2025 - 0356 hours</span></h1><ul class="c0 lst-kix_xvdzy6tu78xp-0 start"><li class="c3 c14 li-bullet-0"><span class="c1">Added a 12V LDO regulator to drive the FETs using when PWR_IN &gt; 12V</span></li><li class="c3 c14 c5 li-bullet-0"><span class="c1"></span></li></ul></body></html>